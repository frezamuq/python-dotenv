language: python
sudo: false
python:
  - '2.7'
  - '3.3'
  - '3.4'
  - pypy
install:
  - pip install python-coveralls
  - pip install -q -r requirements.txt
  - pip install --editable .
before_script: flake8
script:
  - coverage run --source=dotenv.py --omit='*tests*' -m py.test tests/ -v --tb=native
  - coverage report
after_script:
  - coveralls
deploy:
  provider: pypi
  user: 'theskumar'
  password:
    secure: xe5yaUqAb0jam6epvEGSUMYt9L5gSRyFLaahTmCDEULP7msj8D45vswV/uEvnjdWdBw5CPuBkhLJXj2vsVMjkWVSa6bBfz79sEdd//70lE07bJA9sBSsXwbB4hxY+jWgW1KTFUNCPFP59L0ZosgYHJMbLcyr8iH2ZI+QzyUrO1U=
  on:
    tags: true
